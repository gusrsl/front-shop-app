<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="8">
        <ion-list>
          <ion-item *ngFor="let item of cart">
            <ion-card class="product-card">
              <ion-card-header>
                <ion-card-title>{{item.product.descripcion}}</ion-card-title>
                <ion-card-subtitle>TOTAL: ${{item.product.precio * item.quantity}}</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content>
                <ion-grid>
                  <ion-row>
                    <ion-col size="4">
                      <ion-img class="product-image" [src]="item.product.images[0]"></ion-img>
                    </ion-col>
                    <ion-col size="5" class="product-details">
                      <ion-label>
                        <h2>{{item.product.descripcion}}</h2>
                        <p>${{item.product.precio}}</p>
                      </ion-label>
                      <ion-button fill="outline" size="small" class="ion-margin" (click)="removeFromCart(item.product)">ELIMINAR</ion-button>
                      <ion-button fill="outline" size="small" class="ion-margin">MOVER ❤️</ion-button>
                    </ion-col>
                    <ion-col size="3" class="quantity-controls">
                      <ion-button fill="outline" size="small" (click)="decrementQuantity(item)" [disabled]="item.quantity <= 1">-</ion-button>
                      <ion-input type="number" [(ngModel)]="item.quantity" min="1" class="quantity-input"></ion-input>
                      <ion-button fill="outline" size="small" (click)="incrementQuantity(item)">+</ion-button>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </ion-card-content>
            </ion-card>
          </ion-item>
        </ion-list>
      </ion-col>
      <ion-col size="12" size-md="4">
        <ion-card class="animated-card">
          <ion-card-header>
            <ion-card-title>DETALLES DEL PRECIO</ion-card-title>
            <ion-button expand="full" class="animated-button" (click)="clearCart()">VACIAR CARRITO</ion-button>
          </ion-card-header>
          <ion-card-content>
            <ion-item>
              <ion-label>
                <h2>Subtotal</h2>
                <p>${{subtotal}}</p>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-label>
                <h2>Descuento</h2>
                <p>${{discount}}</p>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-label>
                <h2>Total del Carrito</h2>
                <p>${{total}}</p>
              </ion-label>
            </ion-item>
            <ion-button expand="full" class="animated-button" (click)="proceedToPayment()">PROCEEDER AL PAGO</ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
